<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Manage Exams</title>
<link rel="stylesheet" href="style.css">
</head>
<body>
<h2>Add Exam</h2>
<form id="examForm">
    <input type="text" id="name" placeholder="Exam Name" required>
    <input type="date" id="date" required>
    <button type="submit">Add Exam</button>
</form>

<h2>All Exams</h2>
<table id="examsTable">
    <thead>
        <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Date</th>
            <th>Action</th>
        </tr>
    </thead>
    <tbody></tbody>
</table>

<script src="script.js"></script>
<script>
const formEx = document.getElementById('examForm');
const tableEx = document.querySelector('#examsTable tbody');

// Load exams and render table
async function loadExams() {
    const exams = await getExams();
    tableEx.innerHTML = '';

    exams.forEach(e => {
        const tr = document.createElement('tr');
        tr.innerHTML = `
            <td>${e.id}</td>
            <td>${e.name}</td>
            <td>${e.date}</td>
            <td><button data-id="${e.id}" class="deleteBtn">Delete</button></td>
        `;
        tableEx.appendChild(tr);
    });

    // Attach delete event listeners
    document.querySelectorAll('.deleteBtn').forEach(btn => {
        btn.addEventListener('click', async () => {
            const id = btn.getAttribute('data-id');
            await deleteExam(id);
            loadExams(); // refresh table
        });
    });
}

// Add new exam
formEx.addEventListener('submit', async e => {
    e.preventDefault();
    const name = document.getElementById('name').value;
    const date = document.getElementById('date').value;
    await addExam(name, date);
    formEx.reset();
    loadExams();
});

// Initial load
loadExams();
</script>
</body>
</html>
